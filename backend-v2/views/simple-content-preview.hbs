<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´: {{content.title.fa}}</title>
    <style>
        body {
            font-family: Tahoma, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            direction: rtl;
        }
        .admin-header {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .admin-header h1 {
            margin: 0;
            color: #333;
            font-size: 18px;
        }
        .admin-toolbar {
            background: #e9ecef;
            padding: 10px 20px;
            border-bottom: 1px solid #ced4da;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        .content-info {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #495057;
        }
        .content-info span {
            background: white;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        .locale-switcher {
            display: flex;
            gap: 5px;
            margin-right: auto;
        }
        .locale-btn {
            padding: 6px 12px;
            border: 1px solid #007bff;
            background: white;
            color: #007bff;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
        }
        .locale-btn.active {
            background: #007bff;
            color: white;
        }
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        .preview-container {
            max-width: 1000px;
            margin: 20px auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .preview-content {
            padding: 40px;
            min-height: 500px;
        }
        .preview-content h1, .preview-content h2, .preview-content h3 {
            color: #333;
            margin-bottom: 20px;
        }
        .preview-content p {
            line-height: 1.8;
            color: #555;
            margin-bottom: 15px;
        }
        .preview-content .block {
            margin-bottom: 30px;
        }
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }
        .empty-state h3 {
            color: #6c757d;
            margin-bottom: 10px;
        }
        .error-state {
            background-color: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 6px;
            margin: 20px;
            text-align: center;
        }
        .json-debug {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            display: none;
        }
        .debug-toggle {
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
            font-size: 12px;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    {{#if success}}
    <div class="admin-header">
        <h1>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§: {{content.title.fa}}</h1>
    </div>

    <div class="admin-toolbar">
        <div class="content-info">
            <span><strong>ID:</strong> {{content.id}}</span>
            <span><strong>Type:</strong> {{content.type}}</span>
            <span><strong>Status:</strong> {{content.status}}</span>
            <span><strong>Slug:</strong> {{content.slug}}</span>
        </div>

        <div class="locale-switcher">
            <a href="?locale=fa" class="locale-btn {{#eq locale 'fa'}}active{{/eq}}">ÙØ§Ø±Ø³ÛŒ</a>
            <a href="?locale=en" class="locale-btn {{#eq locale 'en'}}active{{/eq}}">English</a>
        </div>

        <a href="/admin/contents/{{content.id}}/edit" class="btn btn-primary">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</a>
        <a href="/admin/contents/{{content.id}}/json" class="btn btn-secondary">ğŸ” JSON</a>
        <a href="/admin/contents" class="btn btn-success">â†©ï¸ Ù„ÛŒØ³Øª Ù…Ø­ØªÙˆØ§Ù‡Ø§</a>

        <button class="debug-toggle" onclick="toggleDebug()">Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¯ÛŒØ¨Ø§Ú¯</button>
    </div>

    <div class="preview-container">
        <div class="preview-content">
            {{#if bodyHtml}}
                {{{bodyHtml}}}
            {{else}}
                <div class="empty-state">
                    <h3>âš ï¸ Ù‡ÛŒÚ† Ù…Ø­ØªÙˆØ§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</h3>
                    <p>Ø§ÛŒÙ† Ù…Ø­ØªÙˆØ§ Ù‡Ù†ÙˆØ² Ø¨Ù„ÙˆÚ©ÛŒ Ù†Ø¯Ø§Ø±Ø¯. Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØªÙˆØ§ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "ÙˆÛŒØ±Ø§ÛŒØ´" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</p>
                    <p>Ù…Ø­ØªÙˆØ§Ù‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø² Ù‚Ø¨Ù„ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ø¯Ø§Ø±Ø§ÛŒ Ø¨Ù„ÙˆÚ© Ù…ÛŒâ€ŒØ¨Ø§Ø´Ù†Ø¯.</p>
                </div>
            {{/if}}
        </div>
    </div>

    <div class="json-debug" id="jsonDebug">
        <strong>Ø¯ÛŒØ¨Ø§Ú¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª:</strong>
        Ø¨Ù„ÙˆÚ©â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù… (Raw Blocks):
        {{json content.blocks}}
        
        HTML Ø±Ù†Ø¯Ø± Ø´Ø¯Ù‡:
        {{bodyHtml}}
    </div>

    {{else}}
    <div class="error-state">
        <h2>âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</h2>
        <p>{{error}}</p>
        <a href="/admin/contents" class="btn btn-secondary">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª</a>
    </div>
    {{/if}}

    <script>
        function toggleDebug() {
            const debug = document.getElementById('jsonDebug');
            debug.style.display = debug.style.display === 'none' ? 'block' : 'none';
        }
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø¨Ù„ÙˆÚ©â€ŒÙ‡Ø§
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ headings
            const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
            headings.forEach(heading => {
                heading.style.marginBottom = '15px';
                heading.style.color = '#333';
            });
            
            // Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ùâ€ŒÙ‡Ø§
            const paragraphs = document.querySelectorAll('p');
            paragraphs.forEach(p => {
                p.style.lineHeight = '1.7';
                p.style.marginBottom = '15px';
                p.style.color = '#555';
            });
        });
    </script>
</body>
</html>
