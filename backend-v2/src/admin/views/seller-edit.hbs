{{! extends layout }}
{{#extend "layouts/main"}}
    {{#content "body"}}

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 class="mb-0">ویرایش فروشنده</h3>
            <p class="text-muted mb-0">شماره: #{{seller.id}}</p>
        </div>
        <div>
            <a href="/admin/sellers" class="btn btn-secondary">
                <i class="bi bi-arrow-right"></i> بازگشت به لیست
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header bg-warning">
                    <h5 class="mb-0"><i class="bi bi-pencil-square"></i> ویرایش اطلاعات</h5>
                </div>
                <div class="card-body">
                    <form action="/admin/sellers/{{seller.id}}" method="POST">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">نام کامل فروشنده *</label>
                                <input type="text" class="form-control" id="name" name="name" 
                                       value="{{seller.name}}" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">ایمیل *</label>
                                <input type="email" class="form-control" id="email" name="email" 
                                       value="{{seller.email}}" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">تلفن تماس *</label>
                                <input type="tel" class="form-control" id="phone" name="phone" 
                                       value="{{seller.phone}}" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="website" class="form-label">وبسایت</label>
                                <input type="url" class="form-control" id="website" name="website" 
                                       value="{{seller.website}}">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">آدرس</label>
                            <textarea class="form-control" id="address" name="address" rows="3">{{seller.address}}</textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="status" class="form-label">وضعیت حساب *</label>
                                <select class="form-select" id="status" name="status" required>
                                    <option value="active" {{#if (eq seller.status 'active')}}selected{{/if}}>فعال</option>
                                    <option value="inactive" {{#if (eq seller.status 'inactive')}}selected{{/if}}>غیرفعال</option>
                                    <option value="pending" {{#if (eq seller.status 'pending')}}selected{{/if}}>در انتظار تأیید</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="taxId" class="form-label">شناسه مالیاتی</label>
                                <input type="text" class="form-control" id="taxId" name="taxId" 
                                       value="{{seller.taxId}}">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="commission" class="form-label">درصد کمیسیون (%)</label>
                                <input type="number" class="form-control" id="commission" name="commission" 
                                       value="{{seller.commission}}" min="0" max="50" step="0.5">
                            </div>
                        </div>

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="isVerified" name="isVerified" 
                                   {{#if seller.isVerified}}checked{{/if}}>
                            <label class="form-check-label" for="isVerified">
                                حساب تأیید شده است
                            </label>
                        </div>

                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
                                <i class="bi bi-trash"></i> حذف فروشنده
                            </button>
                            <div class="d-flex gap-2">
                                <button type="reset" class="btn btn-secondary">
                                    <i class="bi bi-arrow-clockwise"></i> بازنشانی
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-save"></i> ذخیره تغییرات
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-info-circle"></i> اطلاعات حساب</h5>
                </div>
                <div class="card-body">
                    <dl class="row mb-0">
                        <dt class="col-sm-5">تاریخ ایجاد:</dt>
                        <dd class="col-sm-7">{{seller.createdAt}}</dd>
                        
                        <dt class="col-sm-5">آخرین بروزرسانی:</dt>
                        <dd class="col-sm-7">{{seller.updatedAt}}</dd>
                        
                        <dt class="col-sm-5">تعداد محصولات:</dt>
                        <dd class="col-sm-7">{{seller.productCount}} عدد</dd>
                        
                        <dt class="col-sm-5">تعداد سفارشات:</dt>
                        <dd class="col-sm-7">{{seller.orderCount}} سفارش</dd>
                    </dl>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-lightning-charge"></i> اقدامات سریع</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-primary">
                            <i class="bi bi-envelope"></i> ارسال پیام
                        </button>
                        <button class="btn btn-outline-success">
                            <i class="bi bi-eye"></i> مشاهده محصولات
                        </button>
                        <button class="btn btn-outline-warning">
                            <i class="bi bi-clock-history"></i> تاریخچه فعالیت
                        </button>
                        <button class="btn btn-outline-info">
                            <i class="bi bi-file-text"></i> گزارش عملکرد
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal حذف -->
    <div class="modal fade" id="deleteModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">تأیید حذف</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>آیا از حذف فروشنده <strong>{{seller.name}}</strong> مطمئن هستید؟</p>
                    <p class="text-danger"><small>این عمل قابل بازگشت نیست!</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">انصراف</button>
                    <button type="button" class="btn btn-danger">حذف فروشنده</button>
                </div>
            </div>
        </div>
    </div>

    {{/content}}
{{/extend}}
